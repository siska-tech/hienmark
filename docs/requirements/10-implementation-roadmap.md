# 実装ロードマップ

## 10. HienMark 実装ロードマップ

**文書管理:**
- **文書ID:** HienMark-IMP-ROADMAP-202511
- **基準文書:** HienMark-RDD-ADD-202511 (追加要件定義書 v1.1) / HienMark-IMP-PLAN-202511 (実装計画書 v1.0)
- **最終更新:** 2025年11月5日（アーキテクチャ軌道修正反映）
- **重要な変更:** REQ-ARC-001を「SQLiteプライマリ」から「Markdownプライマリ / SQLiteインデックス」に軌道修正（Git連携実現のため）

---

## 1. ロードマップ概要

### 1.1 目的

本文書は、[追加要件定義書](../../docs/memo/20251101-appendix-requirements.md)にて定義されたロードマップと要件に基づき、HienMarkプロジェクトの開発を効率的かつ体系的に推進するための具体的な実装計画を提供する。

### 1.2 全体スケジュール

**想定開発期間:** 19-28週（約5-7ヶ月）

**開発フェーズ:**
- **フェーズ1:** 基盤安定化・コアUX（優先度: 高）- 8週間
- **フェーズ2:** 中核ワークフロー（優先度: 中）- 6週間
- **フェーズ3:** 高度機能・外部連携（優先度: 低）- 5-7週間
- **QA・リリース:** 最終テスト・リリース準備 - 2週間

---

## 2. ロードマップ・要件トレーサビリティ

以下の表は、提案されたロードマップ項目と本ドキュメント体系の要件IDとの対応関係を示す。

**【Table 10-1: ロードマップ・要件IDトレーサビリティ・マトリクス】**

| ロードマップ 提案項目 | 優先度 | 要件ID | ドキュメント参照 |
|:-----|:---:|:------|:------|
| **1.1 基盤の安定化・刷新** |
| タスクリストのSQLiteインデックス化（Markdownプライマリ） | 高 | REQ-ARC-001 | [01-architecture.md](01-architecture.md#req-arc-001) |
| Mermaidの削除 | 高 | REQ-ARC-002 | [01-architecture.md](01-architecture.md#req-arc-002) ✅ |
| **1.2 コア編集機能の強化 (WYSIWYG)** |
| ビジュアルビューへのWYSIWYG編集 | 高 | REQ-EDT-001 | [02-functional-requirements.md](02-functional-requirements.md#req-edt-001) |
| 双方向同期 | 高 | REQ-EDT-002 | [02-functional-requirements.md](02-functional-requirements.md#req-edt-002) |
| テーブル編集機能 | 高 | REQ-EDT-003, TR-001 | [02-functional-requirements.md](02-functional-requirements.md#req-edt-003), [09-technical-requirements.md](09-technical-requirements.md#tr-001) |
| アセット管理機能 | 高 | REQ-EDT-004 | [02-functional-requirements.md](02-functional-requirements.md#req-edt-004) |
| **1.3 基本UI/UXの改善** |
| フォルダ概念の追加 | 高 | REQ-UIX-001 | [03-ui-ux-requirements.md](03-ui-ux-requirements.md#req-uix-001) |
| **2.1 カンバン機能の追加** |
| カンバン機能 | 中 | REQ-KAN-001 | [04-advanced-features.md](04-advanced-features.md#req-kan-001) |
| **2.2 ガントチャート機能の強化** |
| インタラクティブ性の向上 | 中 | REQ-GNT-001 | [04-advanced-features.md](04-advanced-features.md#req-gnt-001) |
| 表示機能の強化 | 中 | REQ-GNT-002 | [04-advanced-features.md](04-advanced-features.md#req-gnt-002) |
| **2.3 Gitワークフロー連携** |
| ブランチスコープ機能（キラー機能） | 中 | REQ-GIT-001 | [04-advanced-features.md](04-advanced-features.md#req-git-001) |
| Git連携UI（差分・履歴） | 中 | REQ-GIT-002 | [04-advanced-features.md](04-advanced-features.md#req-git-002) |
| Git連携UI（コミット操作） | 中 | REQ-GIT-003 | [04-advanced-features.md](04-advanced-features.md#req-git-003) |
| Git連携UI（ブランチ操作） | 中 | REQ-GIT-004 | [04-advanced-features.md](04-advanced-features.md#req-git-004) |
| **3.1 データ入出力 (I/O)** |
| データエクスポート機能 | 低 | REQ-DAT-001 | [08-data-io-requirements.md](08-data-io-requirements.md#req-dat-001) |
| タグのエクスポート/インポート | 低 | REQ-DAT-002 | [08-data-io-requirements.md](08-data-io-requirements.md#req-dat-002) |
| **3.2 高度なタグ機能** |
| 高度なタグ属性タイプのUI実装 | 低 | REQ-TAG-001 | [08-data-io-requirements.md](08-data-io-requirements.md#req-tag-001) |
| **3.3 GitHub/GitLab連携（将来）** |
| プルリクエスト(PR)連携 | 低 | REQ-API-001 | [08-data-io-requirements.md](08-data-io-requirements.md#req-api-001) |

---

## 3. フェーズ 1: 基盤安定化・コアUX（優先度: 高）

**期間:** 8週間
**目的:** アプリケーションの根本的な安定化（DB移行）と、中核となる編集体験（WYSIWYG、テーブル）の確立

### 3.1 マイルストーン

- **M1:** キックオフ (W1)
- **M2:** アーキテクチャ設計完了 (W3)
- **M3:** αリリース (W8)

### 3.2 詳細WBS

#### WBS-1: REQ-ARC-001（Markdownプライマリ / SQLiteインデックス化）

**重要:** 2025年11月5日 アーキテクチャ軌道修正により、**SQLiteはプライマリではなく、Markdownファイルのインデックス/キャッシュとしてのみ機能**する。

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-ARC-1.1 | タスク、フォルダ、タグ、アセットのインデックススキーマ定義 | TL/BE | 3日 | - | ⏳ 未着手 |
| Task-ARC-1.2 | インデックス管理レイヤー（リポジトリパターン）実装 | BE | 5日 | Task-ARC-1.1 | ⏳ 未着手 |
| Task-ARC-1.3 | Markdownファイル → SQLiteインデックス再構築機能 | BE | 3日 | Task-ARC-1.2 | ⏳ 未着手 |
| Task-ARC-1.4 | ファイルシステム監視（File Watcher）実装 | BE | 4日 | Task-ARC-1.2 | ⏳ 未着手 |
| Task-ARC-1.5 | インデックスの差分更新ロジック（mtime比較）実装 | BE | 3日 | Task-ARC-1.3 | ⏳ 未着手 |
| Task-ARC-1.6 | 10,000タスクでのパフォーマンステスト | QA | 2日 | Task-ARC-1.5 | ⏳ 未着手 |

**成果物:**
- `.hienmark/cache.sqlite` インデックススキーマ定義
- インデックス管理レイヤー（Rust実装）
- ファイルウォッチャー実装
- 差分更新ロジック

**アーキテクチャ原則（軌道修正後）:**

**データの「正」と「副」の定義:**
- **正 (プライマリデータ):** **Markdownファイル群 (`*.md`)**
  - すべてのオリジナルデータは、プレーンテキストのMarkdownファイルとしてWorkspace内に存在する
  - これがHienMarkの唯一絶対のデータソースである
  - Git連携（diff, log, checkout）が可能な設計

- **副 (インデックス/キャッシュ):** **SQLiteデータベース (`.hienmark/cache.sqlite`)**
  - SQLiteは、Markdownファイル群の**「検索インデックス」**および**「表示キャッシュ」**としてのみ機能する
  - このファイルは、極論、**いつ削除されても Markdownファイル群から 100% 再構築可能**でなければならない
  - ネットワークドライブ等での同時アクセスによる破損リスクを回避

**必須データフロー:**

**(A) データの書き込み (HienMark → ディスク):**
1. ユーザーがHienMark上でタスクを編集（例: ステータス変更、本文修正）し、保存する
2. **最優先で、対応する Markdownファイル (`.md`) の内容をディスク上で更新する**
3. その後（同期的または非同期で）、SQLiteインデックスも当該タスクの変更内容で更新する

**(B) データの読み込み (ディスク → HienMark):**
1. HienMarkが起動、またはWorkspaceを開く
2. Workspace内の全Markdownファイルをスキャンする
3. 全ファイルの内容を解析（パース）し、SQLiteインデックスを構築（または差分更新）する
4. タスク一覧、カンバン、ガントチャート等の表示は、**すべて高速化のためにSQLiteインデックスから読み出す**

**実装詳細:**

**インデックススキーマ設計方針:**
- **テーブル構造:**
  - `tasks_index` - タスクインデックス（ID, ファイルパス, Front Matter JSON, 最終更新日時）
  - `folders_index` - フォルダ階層インデックス（ID, 親フォルダID, 名前, パス）
  - `task_folders_index` - タスクとフォルダの関連インデックス（タスクID, フォルダID）
  - `assets_index` - アセットインデックス（ID, ファイルパス, タスクID, 相対パス）
  - `tag_index` - タグインデックス（カテゴリ, 値, タスク数）
  - `file_metadata` - ファイルメタデータ（ファイルパス, mtime, インデックス最終更新日時）

- **Rust依存関係:**
  - `rusqlite` - SQLiteドライバー
  - `serde_json` - Front MatterのJSONシリアライゼーション
  - `notify` - ファイルシステム監視（既存依存関係を活用）
  - インデックスバージョン管理

- **リポジトリパターン:**
  - `TaskIndexRepository` - タスクインデックス管理（読み取り専用）
  - `FolderIndexRepository` - フォルダインデックス管理
  - `AssetIndexRepository` - アセットインデックス管理
  - `IndexBuilder` - Markdownファイルからインデックスを構築するサービス

**ファイルシステム監視（Task-ARC-1.4）:**
- **要件:** HienMarkが起動中に、外部エディタ（VSCode等）によってMarkdownファイルが直接変更・追加・削除された場合を考慮する
- **設計:** Tauriの`notify`クレート（既存依存関係）を利用し、**Markdownファイルの変更をリアルタイムで検知**する
- **動作:** 検知後、即座にSQLiteインデックスの該当箇所を更新（または再パース）し、UIに反映させる
- **実装:** `src-tauri/src/service/file_watcher.rs` を拡張し、インデックス更新ロジックを統合

**差分更新ロジック（Task-ARC-1.5）:**
- **要件:** タスクが数千を超えた場合の起動速度を担保する
- **設計:** 起動時に、常に全ファイルをスキャン＆パースするのではなく、**ファイルの最終更新日時 (mtime)** とSQLite内の最終インデックス日時を比較する
- **動作:** 変更があったファイル**のみ**を再パースし、SQLiteインデックスを**「差分更新」**するロジックを実装すること
- **実装:** `file_metadata`テーブルの`mtime`とファイルシステムの`mtime`を比較し、不一致の場合のみ再パース

**再構築機能（Task-ARC-1.3）:**
- SQLiteインデックスファイル（`.hienmark/cache.sqlite`）が破損または削除された場合、全Markdownファイルから完全に再構築可能であることを保証する
- 再構築は起動時または手動実行時に実行可能

---

#### WBS-2: REQ-ARC-002（分析画面のECharts作図への完全移行とMarkdown上でのMermaid記法サポートの維持） ✅ 完了

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-ARC-2.1 | 「分析画面」からECharts/Mermaid切替ボタンを削除 | FE | 1日 | - | ✅ 完了 |
| Task-ARC-2.3 | Markdownエディタ上でのMermaid記法レンダリングのリグレッションテスト | QA | 1日 | Task-ARC-2.2 | ✅ 完了 |

**成果物:**
- ✅ 分析画面の ECharts 一本化
- ✅ Mermaidレンダリング機能の維持確認

---

#### WBS-3: REQ-EDT-001/002（WYSIWYG + 双方向同期）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-EDT-1.1 | WYSIWYGエディタライブラリ（TipTap, Slate.js等）の選定・評価 | TL/FE | 2日 | - | ⏳ 未着手 |
| Task-EDT-1.2 | ビジュアルビューとMarkdownソースビューの双方向同期ロジック実装 | FE | 7日 | Task-EDT-1.1 | ⏳ 未着手 |
| Task-EDT-1.3 | NFR-2.2.2.1（同期遅延100ms未満）の検証 | QA | 1日 | Task-EDT-1.2 | ⏳ 未着手 |

**成果物:**
- WYSIWYGエディタコンポーネント
- 双方向同期エンジン

**実装詳細:**

**ライブラリ選定方針（Task-EDT-1.1）:**
- **候補ライブラリ:**
  - TipTap 2.x - ProseMirrorベース、拡張性高い
  - Slate.js - React統合、カスタマイズ性高い
  - Lexical (Meta) - パフォーマンス重視、モダン
- **評価基準:**
  - Markdown双方向変換の容易性
  - CodeMirror 6との統合可能性
  - TypeScriptサポート
  - パフォーマンス（大型ドキュメント対応）
  - ライセンス互換性

**双方向同期戦略（Task-EDT-1.2）:**
- **Markdown → WYSIWYG:** Markdownパーサー（markdown-it等）→ ProseMirror/Document
- **WYSIWYG → Markdown:** ProseMirror/Document → Markdownシリアライザー
- **同期タイミング:** 
  - リアルタイム（debounce 100ms以下）
  - 保存時（確実な同期保証）
- **競合防止:** 編集中フラグ管理、更新順序制御

---

#### WBS-4: REQ-EDT-003（テーブル編集機能）+ TR-001

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-TR1.1 | **TR-001**: EAWライブラリ選定・評価（`get-east-asian-width`, `east-asian-width`等） | TL | 1日 | - | ✅ 完了 |
| Task-TR1.2 | **TR-001**: テーブル・フォーマッタ（桁揃え）の実装 | FE/BE | 5日 | Task-TR1.1 | ✅ 完了 |
| Task-TR1.3 | **TR-001**: 日本語・英数字混在テーブルのアラインメント検証 | QA | 2日 | Task-TR1.2 | ✅ 完了 |
| Task-EDT-3.1 | WYSIWYG内でのテーブルGUI操作（行・列追加等）実装 | FE | 3日 | Task-EDT-1.2 | ⏳ 未着手 |
| Task-EDT-3.2 | テーブル編集とフォーマッタの統合 | FE | 2日 | Task-TR1.2, Task-EDT-3.1 | ⏳ 未着手 |

**成果物:**
- ✅ TR-001準拠のテーブルフォーマッタ（実装完了）
- ✅ CodeMirror拡張統合（キーボードショートカット + 右クリックメニュー）
- ✅ TR-001検証完了（AC-TR1-1, AC-TR1-3 合格）
- ⏳ WYSIWYGテーブル編集UI（未実装）

**重要:** TR-001の受入基準（AC-2.2.3.2）が最優先事項 → ✅ **達成**

---

#### WBS-5: REQ-EDT-004（アセット管理）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-EDT-4.1 | D&Dによるファイルコピー（`.hienmark/assets/`）と相対パス挿入ロジック | FE/BE | 3日 | - | ⏳ 未着手 |
| Task-EDT-4.2 | プロジェクト移動時のリンク切れテスト | QA | 1日 | Task-EDT-4.1 | ⏳ 未着手 |

**成果物:**
- アセット管理機能
- 相対パス自動生成ロジック

**実装詳細:**

**アセット管理方針:**
- **ストレージ:** `.hienmark/assets/` ディレクトリに集約
- **ファイルコピー:** D&D時に元ファイルをアセットディレクトリへコピー
- **パス生成:** Markdown記法 `![alt](relative/path/to/asset.png)` を自動挿入
- **整合性管理:** REQ-ARC-001（SQLite）の `assets` テーブルで管理

---

#### WBS-6: REQ-UIX-001（フォルダ機能）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-UIX-1.1 | ツリービューUIコンポーネント実装 | FE | 3日 | Task-ARC-1.2 | ✅ 完了 |
| Task-UIX-1.2 | フォルダCRUD、タスクのD&D移動ロジック（SQLite DB連携） | FE/BE | 4日 | Task-UIX-1.1 | 🔄 部分完了 |

**成果物:**
- ✅ フォルダツリーUI（`src/components/FolderTree/`）
- ✅ バックエンドコマンド（`create_folder`, `move_task`）
- ✅ フロントエンドサービス統合
- ⏳ コンテキストメニューUI（今後実装）

**実装詳細:**

**フォルダ機能方針:**
- **UI:** ✅ 左サイドバーにツリービュー（展開/折りたたみ）実装完了
- **データモデル:** ⏳ REQ-ARC-001の `folders` テーブルで階層管理（将来実装）
- **操作:** 
  - ✅ フォルダ・タスク表示
  - ✅ 展開/折りたたみ
  - ✅ タスク選択
  - ✅ バックエンド: フォルダ作成・タスク移動コマンド
  - ⏳ コンテキストメニュー（今後実装）
  - ⏳ タスクのD&D移動（今後実装）
  - ⏳ フォルダリネーム・削除（今後実装）
  - ⏳ フォルダごとのフィルタリング（今後実装）
- **表示:** ✅ タスクブラウザでフォルダ階層表示（タブ切替）

---

## 4. フェーズ 2: 中核ワークフロー（優先度: 中）

**期間:** 6週間
**目的:** HienMarkの中核思想「Gitワークフロー連携」の実現と、主要なプロジェクト管理ビュー（カンバン、ガント）の実装

### 4.1 マイルストーン

- **M4:** 設計完了 (W10)
- **M5:** βリリース (W16)

### 4.2 詳細WBS

#### WBS-7: REQ-KAN-001（カンバン機能）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-KAN-1.1 | カンバンボードUI（カラム、カード、D&D）実装 | FE | 5日 | Task-ARC-1.2 | ⏳ 未着手 |
| Task-KAN-1.2 | カラム定義の永続化、D&Dによるタスクステータス更新（DB連携） | FE/BE | 3日 | Task-KAN-1.1 | ⏳ 未着手 |

---

#### WBS-8: REQ-GNT-001/002（ガント強化）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-GNT-1.1 | D&Dによる日付・依存関係編集機能実装 | FE | 5日 | - | ⏳ 未着手 |
| Task-GNT-1.2 | 担当者・進捗率等のカスタムカラム表示機能実装 | FE | 3日 | Task-GNT-1.1 | ⏳ 未着手 |

---

#### WBS-9: REQ-GIT-001（ブランチスコープ機能）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-GIT-1.1 | タスクとGitブランチの紐付け方法（DBスキーマ拡張）設計 | TL/BE | 2日 | Task-ARC-1.2 | ⏳ 未着手 |
| Task-GIT-1.2 | `.git/HEAD` 変更監視ロジック実装（ファイルウォッチャー or ポーリング） | BE | 3日 | Task-GIT-1.1 | ⏳ 未着手 |
| Task-GIT-1.3 | ビューの動的フィルタリング実装（NFR-3.3.1.1: 2秒以内の検知） | FE/BE | 5日 | Task-GIT-1.2 | ⏳ 未着手 |

**重要:** ブランチスコープ機能はHienMarkの戦略的最重要機能

---

#### WBS-10: REQ-GIT-002/003/004（Git UI連携）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-GIT-2.1 | `git log`, `git diff`, `git add`, `git commit`, `git checkout` を実行する内部API実装 | BE | 5日 | - | ⏳ 未着手 |
| Task-GIT-2.2 | `diff` 表示（サイド・バイ・サイド）、コミット操作UI、ブランチ切替UI実装 | FE | 7日 | Task-GIT-2.1 | ⏳ 未着手 |
| Task-GIT-2.3 | OSの `.gitconfig` が尊重されるか検証 | QA | 1日 | Task-GIT-2.2 | ⏳ 未着手 |

---

## 5. フェーズ 3: 高度機能・外部連携（優先度: 低）

**期間:** 5-7週間
**目的:** データの可搬性（I/O）の確保、高度なユースケースへの対応、将来的な外部サービス連携の基盤構築

### 5.1 マイルストーン

- **M6:** 機能実装完了 (W20)

### 5.2 詳細WBS

#### WBS-11: REQ-DAT-001/002（データI/O）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-DAT-1.1 | DBからCSV/JSONへのエクスポート機能実装 | BE | 3日 | Task-ARC-1.2 | ⏳ 未着手 |
| Task-DAT-1.2 | タグ定義のI/O機能実装 | BE/FE | 3日 | - | ⏳ 未着手 |

---

#### WBS-12: REQ-TAG-001（高度なタグ）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-TAG-1.1 | Currency, Image, Hyperlink 型に対応する専用入力UIコンポーネント実装 | FE | 5日 | - | ⏳ 未着手 |

---

#### WBS-13: REQ-API-001（GitHub/GitLab連携）

| タスクID | タスク名 | 担当 | 期間 | 依存関係 | ステータス |
|---------|---------|-----|------|---------|---------|
| Task-API-1.1 | OAuthまたはPATを用いたAPI認証シーケンス設計 | TL/BE | 2日 | - | ⏳ 未着手 |
| Task-API-1.2 | GitHub/GitLab API連携、PRステータス取得バックエンドサービス実装 | BE | 5日 | Task-API-1.1 | ⏳ 未着手 |
| Task-API-1.3 | PRステータスをタスク詳細画面に表示するUI実装 | FE | 3日 | Task-API-1.2 | ⏳ 未着手 |

---

## 6. テストと品質保証 (QA) 計画

### 6.1 テスト戦略

- **単体テスト:** 各エンジニアが実装タスクのカバレッジを担保（特にBEロジック、TR-001フォーマッタ）
- **結合テスト:**
  - REQ-ARC-001 (インデックス) と各ビュー (REQ-KAN-001, REQ-GNT-001) のデータ連携
  - REQ-ARC-001 (インデックス) とファイルウォッチャーの連携
  - REQ-ARC-001 (インデックス) の再構築機能（Markdown → インデックス）
  - REQ-EDT-002 (双方向同期) と REQ-EDT-003 (テーブルフォーマッタ) の連携
  - REQ-GIT-004 (ブランチ切替UI) と REQ-GIT-001 (ブランチスコープ) の連動

### 6.2 E2Eテストシナリオ

**シナリオ例:**
1. タスクをWYSIWYGで作成
2. 画像を添付（REQ-EDT-004）
3. テーブルを編集（REQ-EDT-003）
4. ブランチを切り替え（REQ-GIT-004）
5. カンバンでステータス変更（REQ-KAN-001）
6. 変更をコミット（REQ-GIT-003）
7. CSVでエクスポート（REQ-DAT-001）

### 6.3 リグレッションテスト

各フェーズのリリース（M3, M5, M7）前に、既存機能（特にREQ-ARC-002で維持するMermaidレンダリング）が破壊されていないことを確認。

---

## 7. 進捗追跡

### 7.1 全体進捗状況

**最終更新:** 2025年12月11日

| フェーズ | 進捗率 | ステータス |
|---------|--------|----------|
| フェーズ1: 基盤安定化・コアUX | 35% | ⏳ 進行中 |
| フェーズ2: 中核ワークフロー | 0% | ⏸️ 未着手 |
| フェーズ3: 高度機能・外部連携 | 0% | ⏸️ 未着手 |

### 7.2 完了タスク

- ✅ **REQ-ARC-002**: Mermaid削除（分析画面のECharts一本化）
- ✅ **Task-TR1.1**: EAWライブラリ選定・評価
- ✅ **Task-TR1.2**: TR-001準拠テーブルフォーマッタ実装
- ✅ **Task-TR1.3**: TR-001検証（AC-TR1-1, AC-TR1-3 合格）
- ✅ **Task-UIX-1.1**: ツリービューUIコンポーネント実装

### 7.3 進行中タスク

- ⏳ **REQ-ARC-001**: Markdownプライマリ / SQLiteインデックス化（アーキテクチャ軌道修正完了、設計フェーズ）
- 🔄 **Task-UIX-1.2**: フォルダCRUD、タスクのD&D移動ロジック（バックエンド完了、UI未実装）
- ⏳ **REQ-EDT-003**: テーブル編集機能（WYSIWYG統合部分）

### 7.4 未着手タスク（優先度順）

**フェーズ1:**
1. **REQ-ARC-001**: Markdownプライマリ / SQLiteインデックス化（実装）
   - Task-ARC-1.4: ファイルシステム監視（必須）
   - Task-ARC-1.5: 差分更新ロジック（必須）
2. **REQ-EDT-001/002**: WYSIWYG + 双方向同期
3. **Task-EDT-3.1**: WYSIWYG内でのテーブルGUI操作
4. **Task-EDT-3.2**: テーブル編集とフォーマッタの統合
5. **REQ-EDT-004**: アセット管理機能
6. **REQ-UIX-001**: フォルダ機能

**フェーズ2:**
- REQ-KAN-001: カンバン機能
- REQ-GNT-001/002: ガントチャート強化
- REQ-GIT-001: ブランチスコープ機能
- REQ-GIT-002/003/004: Git UI連携

**フェーズ3:**
- REQ-DAT-001/002: データI/O
- REQ-TAG-001: 高度なタグ機能
- REQ-API-001: GitHub/GitLab連携

---

## 8. リリーススケジュール

### 8.1 マイルストーン進捗

| マイルストーン | タイミング | 成果物 | ステータス |
|------------|----------|--------|----------|
| M1: キックオフ | W1 | 計画書合意、開発環境構築 | ✅ 完了 |
| M2: 設計完了 | W3 | スキーマ設計、TR-001技術検証 | ⏳ 進行中（TR-001完了、アーキテクチャ軌道修正完了、インデックス設計中） |
| M3: フェーズ1 αリリース | W8 | インデックス実装、ファイルウォッチャー、WYSIWYG、テーブル編集 | ⏸️ 未着手 |
| M4: フェーズ2 設計完了 | W10 | Git連携詳細設計、モックアップ | ⏸️ 未着手 |
| M5: フェーズ2 βリリース | W16 | Git連携、カンバン、ガント | ⏸️ 未着手 |
| M6: フェーズ3 機能実装完了 | W20 | 全機能実装 | ⏸️ 未着手 |
| M7: 最終QA・リリース | W22 | リグレッションテスト、公式リリース | ⏸️ 未着手 |

### 8.2 現在のマイルストーン

**現在:** M2（設計完了）への移行中
- ✅ TR-001技術検証完了
- ✅ アーキテクチャ軌道修正完了（2025年11月5日）
  - Markdownプライマリ / SQLiteインデックス設計に変更
  - Git連携実現可能性を確保
- ⏳ SQLiteインデックススキーマ設計着手待ち

**次期目標:** M2完了 → M3（フェーズ1 αリリース）へ

---

## 9. リスクと対策

| リスク | 影響度 | 対策 |
|-------|-------|------|
| TR-001の実装難易度が予想以上に高い | 高 | Task-TR1.1でのライブラリ選定を慎重に実施、必要に応じて実装期間延長 → ✅ 完了 |
| ~~SQLite移行時のデータ損失~~ | ~~高~~ | ~~Task-ARC-1.3でマイグレーション機能の十分なテスト、ロールバック機能実装~~ → ✅ **軌道修正により解消**（Markdownプライマリにより再構築可能） |
| ファイルウォッチャーの実装複雑性 | 中 | Task-ARC-1.4で既存`notify`依存関係を活用、プロトタイピングで技術的実現可能性を確認 |
| インデックス差分更新のパフォーマンス | 中 | Task-ARC-1.5でmtime比較による差分更新の効果を測定、必要に応じて最適化 |
| Git連携機能の複雑性 | 中 | REQ-GIT-001の早期PoC実装、技術的実現可能性の早期確認 → ✅ **軌道修正により実現可能性確保**（Markdownプライマリ） |
| WYSIWYGエディタのライブラリ選定ミス | 中 | Task-EDT-1.1で複数候補を評価、PoC実装で比較検討 |

---

## 10. 参照

- [追加要件定義書（HienMark-RDD-ADD-202511 v1.1）](../../docs/memo/20251101-appendix-requirements.md)
- [実装計画書（HienMark-IMP-PLAN-202511 v1.0）](../../docs/memo/20251101-appendix-inplementation.md)
- [システムアーキテクチャ](01-architecture.md)
- [機能要件](02-functional-requirements.md)
- [UI/UX要件](03-ui-ux-requirements.md)
- [高度な機能](04-advanced-features.md)
- [データ入出力要件](08-data-io-requirements.md)
- [技術要件](09-technical-requirements.md)
