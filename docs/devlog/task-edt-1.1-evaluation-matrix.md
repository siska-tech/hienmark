# WYSIWYGエディタライブラリ評価マトリクス

**作成日:** 2025-11-24  
**目的:** Task-EDT-1.1 の選定材料として、各ライブラリの評価基準を整理

---

## 評価基準

### 必須要件（Must Have）

| 評価項目                           | 重要度     | 説明                               |
| ---------------------------------- | ---------- | ---------------------------------- |
| Markdown双方向変換の容易性         | ⭐⭐⭐⭐⭐ | REQ-EDT-002の核心要件              |
| TypeScriptサポート                 | ⭐⭐⭐⭐⭐ | プロジェクト全体がTypeScript       |
| React統合の容易性                  | ⭐⭐⭐⭐⭐ | Tauri + React 18.3 環境            |
| パフォーマンス（大型ドキュメント） | ⭐⭐⭐⭐   | 10,000行以上のMarkdownファイル対応 |
| ライセンス互換性                   | ⭐⭐⭐⭐   | 商用利用可能、OSS準拠              |
| コミュニティサポート               | ⭐⭐⭐⭐   | アクティブなメンテナンス           |
| バンドルサイズ                     | ⭐⭐⭐     | アプリ起動速度への影響             |

### 重要要件（Should Have）

| 評価項目                       | 重要度 | 説明                                 |
| ------------------------------ | ------ | ------------------------------------ |
| CodeMirror 6との統合可能性     | ⭐⭐⭐ | 既存CodeMirrorから切り替え時の互換性 |
| TR-001テーブルアライメント統合 | ⭐⭐⭐ | 実装済みテーブルフォーマッタとの連携 |
| カスタマイズ性                 | ⭐⭐⭐ | ツールバー、テーマ等のカスタマイズ   |
| 既存プレビュー実装との連携     | ⭐⭐⭐ | markdown-it + DOMPurify統合          |

### あると良い要件（Nice to Have）

| 評価項目               | 重要度 | 説明             |
| ---------------------- | ------ | ---------------- |
| コラボレーション編集   | ⭐⭐   | 将来的な機能拡張 |
| プラグインエコシステム | ⭐⭐   | 機能拡張の柔軟性 |
| アクセシビリティ       | ⭐⭐   | a11y対応         |

---

## 候補ライブラリ詳細評価

### 1. TipTap 2.x

**基本情報:**
- **ベース:** ProseMirror
- **ライセンス:** MIT
- **バージョン:** 2.x (最新)
- **バンドルサイズ:** ~50KB (gzipped)
- **GitHub Stars:** 25k+
- **メンテナンス:** 活発

**Markdown双方向変換:**
- ✅ 公式Markdown拡張あり (`@tiptap/extension-markdown`)
- ✅ ProseMirrorスキーマ ↔ Markdown 変換対応
- ⚠️ 日本語・全角文字混在時のフォーマット調整が必要

**TypeScriptサポート:**
- ✅ 完全なTSサポート
- ✅ 型定義完備

**React統合:**
- ✅ 公式React統合 (`@tiptap/react`)
- ✅ Hooks API提供
- ✅ スムーズな統合

**パフォーマンス:**
- ✅ ProseMirrorベースで大型ドキュメント対応良好
- ✅ Virtual scrolling サポート

**ライセンス:**
- ✅ MIT (商用利用可)

**コミュニティ:**
- ✅ 活発なコミュニティ
- ✅ 豊富なドキュメント
- ✅ Discord サポート

**CodeMirror統合:**
- ⚠️ 直接統合不可（競合フレームワーク）
- ✅ 段階的な移行は可能

**TR-001統合:**
- ⚠️ カスタム拡張が必要
- ✅ ProseMirrorのテーブル拡張がベースにある

**評価サマリー:**
- 強み: プロダクション品質、優秀なMarkdownサポート、React統合良好
- 弱み: CodeMirrorからの移行が必要、学習コスト中程度
- 総合評価: ⭐⭐⭐⭐⭐

---

### 2. Slate.js

**基本情報:**
- **ベース:** React（独自フレームワーク）
- **ライセンス:** MIT
- **バージョン:** 0.103.0+ (最新)
- **バンドルサイズ:** ~30KB (gzipped)
- **GitHub Stars:** 30k+
- **メンテナンス:** 活発

**Markdown双方向変換:**
- ⚠️ 公式Markdown拡張なし（コミュニティ提供）
- ⚠️ カスタム実装が必要な部分が多い
- ⚠️ 日本語・全角文字混在時の対応が不確実

**TypeScriptサポート:**
- ✅ 完全なTSサポート
- ✅ 型定義完備

**React統合:**
- ✅ Reactネイティブ設計
- ✅ React Hooks中心設計
- ✅ 非常にスムーズ

**パフォーマンス:**
- ✅ Immutable.jsベースで最適化良好
- ⚠️ 大型ドキュメントでは若干のパフォーマンス問題の報告あり

**ライセンス:**
- ✅ MIT (商用利用可)

**コミュニティ:**
- ✅ 大規模コミュニティ
- ⚠️ ドキュメント整備がやや不足
- ✅ Discord サポート

**CodeMirror統合:**
- ❌ 直接統合不可（競合フレームワーク）

**TR-001統合:**
- ⚠️ カスタム実装が必要

**評価サマリー:**
- 強み: React統合が優秀、カスタマイズ性が非常に高い
- 弱み: Markdownサポートが弱い、学習コスト高
- 総合評価: ⭐⭐⭐

---

### 3. Lexical (Meta/Facebook)

**基本情報:**
- **ベース:** React（Meta製）
- **ライセンス:** MIT
- **バージョン:** 0.x (開発活発)
- **バンドルサイズ:** ~20KB (gzipped)
- **GitHub Stars:** 15k+
- **メンテナンス:** Meta主導、非常に活発

**Markdown双方向変換:**
- ⚠️ 公式Markdown拡張なし（コミュニティ提供）
- ⚠️ カスタム実装が必要
- ⚠️ 日本語・全角文字混在時の対応が不確実

**TypeScriptサポート:**
- ✅ 完全なTSサポート
- ✅ 型定義完備

**React統合:**
- ✅ Reactネイティブ設計
- ✅ 最新React対応
- ✅ 非常にスムーズ

**パフォーマンス:**
- ✅ パフォーマンス重視設計
- ✅ Virtual scrolling サポート
- ✅ Meta開発で実績あり

**ライセンス:**
- ✅ MIT (商用利用可)

**コミュニティ:**
- ✅ Meta企業主導で安定
- ⚠️ ドキュメント整備途上
- ✅ GitHub Discussions サポート

**CodeMirror統合:**
- ❌ 直接統合不可（競合フレームワーク）

**TR-001統合:**
- ⚠️ カスタム実装が必要

**評価サマリー:**
- 強み: パフォーマンス優秀、Meta主導で将来性高い
- 弱み: Markdownサポートが弱い、ドキュメント不足
- 総合評価: ⭐⭐⭐⭐

---

## 比較サマリー表

| 評価項目               | TipTap 2.x | Slate.js  | Lexical     |
| ---------------------- | ---------- | --------- | ----------- |
| **Markdown双方向変換** | ✅ 優秀    | ⚠️ 弱い | ⚠️ 弱い   |
| **TypeScriptサポート** | ✅ 完全    | ✅ 完全   | ✅ 完全     |
| **React統合**          | ✅ 良好    | ✅ 優秀   | ✅ 優秀     |
| **パフォーマンス**     | ✅ 良好    | ⚠️ 普通 | ✅ 優秀     |
| **ライセンス**         | ✅ MIT     | ✅ MIT    | ✅ MIT      |
| **コミュニティ**       | ✅ 活発    | ✅ 大規模 | ✅ 企業主導 |
| **バンドルサイズ**     | ⚠️ 50KB  | ✅ 30KB   | ✅ 20KB     |
| **学習コスト**         | ⚠️ 中    | ❌ 高     | ⚠️ 中     |
| **CodeMirror移行**     | ⚠️ 必要  | ❌ 必要   | ❌ 必要     |
| **TR-001統合**         | ⚠️ 可能  | ⚠️ 可能 | ⚠️ 可能   |
| **日本語対応**         | ✅ 良い    | ⚠️ 不明 | ⚠️ 不明   |
| **総合評価**           | ⭐⭐⭐⭐⭐ | ⭐⭐⭐    | ⭐⭐⭐⭐    |

---

## 初回推奨結論

### **TipTap 2.x を推奨**

**理由:**
1. ✅ **Markdown双方向変換の実績** - REQ-EDT-002の核心要件を満たす唯一の候補
2. ✅ **プロダクション品質** - 豊富な実績とコミュニティサポート
3. ✅ **React統合の容易さ** - 公式React統合が成熟
4. ✅ **日本語対応の実績** - 日本でも多くのプロジェクトで採用実績あり

**リスク:**
1. ⚠️ CodeMirrorからの移行が必要（段階的移行は可能）
2. ⚠️ バンドルサイズがやや大きい（50KB）

---

## 次のステップ

1. ✅ TipTap 2.x のPoC実装
   - 基本的なMarkdown双方向変換の実装
   - 日本語・全角文字混在テスト
   - TR-001統合の可能性確認

2. 📝 Slate.js と Lexical は現時点で比較検証不要と判断
   - Markdownサポートが弱く、REQ-EDT-002を満たす実装コストが高い
   - ただし、TipTapが要件を満たさない場合は再検討

3. 📊 パフォーマンスベンチマーク実施
   - 10,000行以上のMarkdownでの実測
   - メモリ使用量測定

---

## 参照

- [REQ-EDT-002: 双方向同期](../requirements/02-functional-requirements.md#req-edt-002-双方向同期--未実装)
- [TR-001: Markdownテーブルアラインメント](../requirements/09-technical-requirements.md#tr-001-markdownテーブルの文字幅計算とアラインメント)
- [TipTap公式サイト](https://tiptap.dev/)
- [Slate公式サイト](https://www.slatejs.org/)
- [Lexical公式サイト](https://lexical.dev/)

