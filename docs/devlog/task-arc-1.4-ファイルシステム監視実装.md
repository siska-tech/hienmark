---
status: completed
priority: high
assignee: BE
start_date: 2025-11-17
end_date: 2025-11-20
tags: ["アーキテクチャ", "REQ-ARC-001", "実装", "Rust", "ファイルウォッチャー"]
depends_on: []
---

# Task-ARC-1.4: ファイルシステム監視（File Watcher）実装

## 概要

外部エディタ（VSCode等）によってMarkdownファイルが直接変更された場合を考慮し、リアルタイムでインデックスを更新する機能を実装する。

## タスク詳細

### 実装要件

- HienMarkが起動中に、外部エディタによるMarkdownファイルの変更を検知
- 変更検知後、即座にSQLiteインデックスの該当箇所を更新
- UIに変更を反映

### 設計方針

- Tauriの`notify`クレート（既存依存関係）を活用
- `src-tauri/src/service/file_watcher.rs` を拡張
- インデックス更新ロジックを統合

### 監視対象

- `.md`ファイルの追加
- `.md`ファイルの変更
- `.md`ファイルの削除
- ワークスペース内の新しい`.md`ファイルの検出

### チェックリスト

- [ ] ファイルウォッチャーの実装（`notify`クレート）
- [ ] Markdownファイル変更の検知ロジック
- [ ] インデックス自動更新ロジック
- [ ] UI反映ロジック（イベント通知）
- [ ] パフォーマンステスト（大量ファイル変更時の処理時間）
- [ ] エラーハンドリング

## メモ

- 外部エディタとの統合を考慮
- リアルタイム性を重視（2秒以内の検知目標: NFR-3.3.1.1）



